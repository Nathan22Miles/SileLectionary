REM This is uses https://github.com/siffiejoe/lua-amalg/ to combine the sile lua files into a single file: lect.base.lua
REM Probably do to issues with trying to use this on Windows plus issues about how "require" statements are
REM code this needs some adjustments (fixLectBase.py) to run correctly. The output of this is "lect.lua".
REM This can typeset the .xml version of the lectionary: lua lect.lua lectionary/lectionary.xml

lua amalg.lua -o lect.base.lua -d -s run_sile.lua classes\book classes\diglot classes\docbook classes\lectionary classes\plain core\baseclass core\break core\cairo-output core\colorparser core\font core\frame core\frameparser core\harfbuzz-shaper core\hyphenator-liang core\inputs-common core\inputs-texlike core\inputs-xml core\languages core\length core\libtexpdf-output core\measurements core\nodefactory core\pagebuilder core\pango-shaper core\papersizes core\parserbits core\podofo-output core\settings core\sile core\typesetter core\utilities lua-libraries\bit32-compat lua-libraries\cassowary lua-libraries\char-def lua-libraries\epnf lua-libraries\imagesize\format\bmp lua-libraries\imagesize\format\gif lua-libraries\imagesize\format\jpeg lua-libraries\imagesize\format\mng lua-libraries\imagesize\format\pcd lua-libraries\imagesize\format\png lua-libraries\imagesize\format\pnm lua-libraries\imagesize\format\psd lua-libraries\imagesize\format\swf lua-libraries\imagesize\format\tiff lua-libraries\imagesize\format\xbm lua-libraries\imagesize\format\xcf lua-libraries\imagesize\format\xpm lua-libraries\imagesize\util lua-libraries\imagesize lua-libraries\lomwithpos lua-libraries\repl\console lua-libraries\repl\init lua-libraries\repl\plugins\autoreturn lua-libraries\repl\plugins\completion lua-libraries\repl\plugins\example lua-libraries\repl\plugins\history lua-libraries\repl\plugins\keep_last_eval lua-libraries\repl\plugins\linenoise lua-libraries\repl\plugins\pretty_print lua-libraries\repl\plugins\rcfile lua-libraries\repl\plugins\semicolon_suppress_output lua-libraries\repl\sync lua-libraries\repl\utils lua-libraries\std\base lua-libraries\std\container lua-libraries\std\debug lua-libraries\std\debug_init\init lua-libraries\std\functional lua-libraries\std\io lua-libraries\std\list lua-libraries\std\math lua-libraries\std\modules lua-libraries\std\object lua-libraries\std\optparse lua-libraries\std\package lua-libraries\std\set lua-libraries\std\strbuf lua-libraries\std\strict lua-libraries\std\string lua-libraries\std\table lua-libraries\std\tree lua-libraries\std lua-libraries\unicode-bidi-algorithm packages\balanced-frames packages\bidi packages\color packages\counters packages\features packages\folio packages\footnotes packages\frametricks packages\grid packages\image packages\indexer packages\infonode packages\insertions packages\lorem packages\masters packages\pagebuilder-bestfit packages\raiselower packages\rotate packages\rules packages\simpletable packages\tableofcontents packages\twoside packages\unichar packages\verbatim packages\xmltricks languages\en
python fixLectBase.py
copy lect.lua ..\sile